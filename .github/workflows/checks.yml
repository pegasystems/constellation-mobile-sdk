name: checks

on:
  push:
    branches: [ 'main' ]
  pull_request:
    branches: [ 'main' ]

jobs:
  build-android:
    runs-on: 'ubuntu-latest'
    outputs:
      android-apk: 'android/app/build/intermediates/apk/debug/app-debug.apk'
    env:
      GRADLE: ./gradlew -Dorg.gradle.console=plain --info --stacktrace --no-daemon

    steps:
    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        java-version: '17'
        distribution: 'temurin'

    - name: Setup Android SDK
      uses: android-actions/setup-android@v3

    - name: Checkout repo
      uses: actions/checkout@v4

    - name: Check tool versions
      run: |
        echo '----- Java version ----'
        java -version
        echo '----- ADB version ----'
        adb --version
        echo '----- Directory list ----'
        ls -lh

    - name: Android - gradle assemble
      run: cd android && $GRADLE clean assemble
